{"remainingRequest":"D:\\项目\\new-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\new-app\\src\\pages\\Administrator\\components\\Certificate.vue?vue&type=style&index=0&id=cff61fb8&lang=sass&scoped=true&","dependencies":[{"path":"D:\\项目\\new-app\\src\\pages\\Administrator\\components\\Certificate.vue","mtime":1609732949844},{"path":"D:\\项目\\new-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi52LWNoaXB7YmFja2dyb3VuZDogZ3JlZW47fQo="},{"version":3,"sources":["Certificate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA","file":"Certificate.vue","sourceRoot":"src/pages/Administrator/components","sourcesContent":["<template>\r\n   <v-app class=\"blue accent-2 rounded-lg\">\r\n         <v-container>\r\n            <v-row dense>\r\n                <v-col cols=\"12\">\r\n                    <v-card dense color=\"white\" min-height=\"700\">\r\n                        <v-card-title class=\"h3 indigo white--text\" dense>   \r\n                                证照查找\r\n                                <v-spacer></v-spacer>\r\n                                <v-text-field dark dense append-icon=\"mdi-magnify\" label=\"Search\" single-line hide-details></v-text-field>\r\n                        </v-card-title>\r\n                        <v-card-actions class='indigo white--text d-block' dense>\r\n                            <v-card-text dense class=\"h3 indigo white--text\">按工种选择:</v-card-text>\r\n                            <v-row dense>\r\n                                <div class=\"mx-2\" v-for=\"(i,index) in work_name\" :key=\"index\">\r\n                                    <v-checkbox dark :label=\"i\" color=\"white\" class=\"ma-1\" :value=\"i\" hide-details v-model=\"name_selected\"></v-checkbox>\r\n                                </div>      \r\n                            </v-row>\r\n                        </v-card-actions>\r\n                        <v-card-actions class='indigo white--text d-block' dense>\r\n                            <v-card-text dense class=\"h3 indigo white--text\">按证书类别选择:</v-card-text>\r\n                            <v-row dense>\r\n                                <div class=\"mx-2\" v-for=\"(i,index) in alltypes.category\" :key=\"index\">\r\n                                    <v-checkbox dark :label=\"i\" color=\"white\" class=\"ma-1\" :value=\"i\" hide-details v-model=\"category_selected\"></v-checkbox>\r\n                                </div>      \r\n                            </v-row>\r\n                        </v-card-actions>\r\n                        <v-card-actions class='headline indigo white--text'>\r\n                            <v-spacer></v-spacer>\r\n                            <v-dialog v-model=\"dialog\" max-width=\"350px\" persistent transition=\"dialog-bottom-transition\">\r\n                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn dense color=\"primary\" class=\"mr-4\" v-bind=\"attrs\" v-on=\"on\">新增证照</v-btn>\r\n                                </template>\r\n                            <v-card color=\"white\">\r\n                                <v-app-bar color=\"indigo\">\r\n                                    <v-toolbar-title class=\"white--text\">{{formTitle}}</v-toolbar-title>\r\n                                </v-app-bar>\r\n                                <div class=\"ma-3\"> \r\n                                <v-row dense >\r\n                                    <v-col cols=\"6\" md=\"6\">\r\n                                        <v-autocomplete dense :items=\"Department\" :disabled=\"loadingData.setParticipants\" :loading=\"loadingData.setParticipants\" label=\"部门选择\" v-model=\"SelectedDepartment\" @change=\"setParticipants(SelectedDepartment)\"\r\n                                        solo></v-autocomplete>\r\n                                    </v-col>\r\n                                    <v-col cols=\"6\" md=\"6\">\r\n                                        <v-autocomplete dense :items=\"Participants\" label=\"证照持有人(从社保人员内选择)\" v-model=\"editedItem.username\" \r\n                                        solo></v-autocomplete>\r\n                                    </v-col>\r\n                                    <v-col cols=\"6\" md=\"6\">\r\n                                        <v-autocomplete dense :items=\"alltypes.category\" label=\"证书类型\" v-model=\"editedItem.category\" @change=\"setTypeName(editedItem.category)\"\r\n                                        solo></v-autocomplete>\r\n                                    </v-col>\r\n                                    <v-col cols=\"6\" md=\"6\">\r\n                                        <v-autocomplete dense :items=\"alltypes.name\" label=\"证书名称\" v-model=\"editedItem.name\"\r\n                                        solo></v-autocomplete>\r\n                                    </v-col>\r\n                                    <v-col cols=\"12\" md=\"12\">\r\n                                        <v-text-field dense label=\"证书编号\" v-model=\"editedItem.certificate_id\" outlined></v-text-field>\r\n                                    </v-col>\r\n                                    <v-col cols=\"12\" md=\"12\">\r\n                                        <v-text-field dense label=\"注册时间\" v-model=\"editedItem.certificate_time\" outlined type=\"date\"></v-text-field>\r\n                                    </v-col>\r\n                                    <v-col cols=\"6\" md=\"6\">\r\n                                        <v-text-field dense label=\"有效时间(年)\" v-model=\"editedItem.valid_period\" solo type=\"number\"></v-text-field>\r\n                                    </v-col>\r\n                                    <v-col cols=\"6\" md=\"6\">\r\n                                        <v-autocomplete dense :items=\"alltypes.status\" label=\"当前状态\" v-model=\"editedItem.status\"\r\n                                        solo></v-autocomplete>\r\n                                    </v-col>\r\n                                </v-row>\r\n                                </div>\r\n                                <v-card-actions>\r\n                                    <v-spacer></v-spacer>\r\n                                    <v-btn color=\"indigo darken-1 white--text\"  @click.stop=\"close\">取消</v-btn>\r\n                                    <v-btn color=\"indigo darken-1 white--text\"  @click.stop=\"save\" >保存</v-btn>\r\n                                </v-card-actions>\r\n                            </v-card>\r\n                            </v-dialog>   \r\n                        </v-card-actions>\r\n                            <v-card class=\"ma-3\" v-for=\"(i,index) in profiles\" :key=\"index\" elevation=\"4\">\r\n                                <v-card-title class=\"indigo\" height=\"1\" ></v-card-title>\r\n                                <v-row wrap>\r\n                                    <v-col cols=\"4\" md='4' class=\"ma-2\">\r\n                                       <div class=\"caption grey--text\">职称工种</div>\r\n                                       <div>{{i.name}}</div>\r\n                                    </v-col>\r\n                                     <v-col cols=\"3\" md='1' class=\"my-1\">\r\n                                       <div class=\"caption grey--text\">姓名</div>\r\n                                       <div>{{i.username}}</div>\r\n                                    </v-col>\r\n                                    <v-col cols=\"4\" md='1' class=\"my-1\">\r\n                                       <div class=\"caption grey--text\">专业</div>\r\n                                       <div>{{i.major}}</div>\r\n                                    </v-col>\r\n                                    <v-col cols=\"4\" md='2' class=\"ma-1\">\r\n                                       <div class=\"caption grey--text\">证照ID</div>\r\n                                       <div>{{i.certificate_id}}</div>\r\n                                    </v-col>\r\n                                    <v-col cols=\"4\" md='2' class=\"ma-1 \">\r\n                                       <div class=\"caption grey--text\">注册时间</div>\r\n                                       <div>{{i.certificate_time}}</div>\r\n                                    </v-col>\r\n                                    <v-col cols=\"3\" md='1' class=\"my-1\">\r\n                                       <div :class=\"`caption grey--text ${i.status}`\">状态</div>\r\n                                       <v-chip small :class=\"`${i.status}`\">{{i.status}}</v-chip>\r\n                                    </v-col>\r\n                                </v-row>\r\n                            </v-card>\r\n                            <div class=\"text-center\">\r\n                                <v-container>\r\n                                <v-row justify=\"center\">\r\n                                    <v-col cols=\"8\">\r\n                                    <v-container class=\"max-width\">\r\n                                        <v-pagination\r\n                                        v-model=\"list.page\"\r\n                                        class=\"my-1\"\r\n                                        :length=\"list.pagelength\"\r\n                                        :total-visible=\"7\"\r\n                                        ></v-pagination>\r\n                                    </v-container>\r\n                                    </v-col>\r\n                                </v-row>\r\n                                </v-container>\r\n                            </div>    \r\n                    </v-card>\r\n                </v-col>\r\n            </v-row>\r\n         </v-container>\r\n    </v-app>\r\n</template>\r\n\r\n<script>\r\nimport {work_name,ArrayOne,ArrayTwo,ArrayThree,ArrayFour,ArrayFive,ArraySix,Department} from '@/assets/employee/work_name.js'\r\nexport default {\r\n    name: 'Humansource',\r\n    props:{employees:Array},\r\n    data(){\r\n        return{\r\n            //固定渲染数据\r\n            work_name,ArrayOne,ArrayTwo,ArrayThree,ArrayFour,ArrayFive,ArraySix,Department,\r\n            SelectedDepartment:'',\r\n            Participants:[],\r\n            list:{page:1,pagelength:10},\r\n            name_selected:[],\r\n            category_selected:['注册类','八大员','三类人员','职称证','执业资格','技术工人'],\r\n            alltypes:{name:[],category:['注册类','八大员','三类人员','职称证','执业资格','技术工人'],status:['待定','被借出','被锁证']},\r\n            \r\n\r\n            //活动渲染数据\r\n            dialog:false,\r\n            dialogDelete:false,\r\n            loadingData:{setParticipants:false},\r\n            editedIndex: -1,\r\n            editedItem:{},\r\n            defaultItem:{},\r\n            profiles:[\r\n                {  name: \"一级建造师\",username:\"叶展华\",ID:'',\r\n                    certificate_time: \"2025年7月\",certificate_id: \"粤建安54896578\",\r\n                    valid_period: 5,major: \"装饰装修\",category: \"注册类\",status:\"被借出\",\r\n                    licensing_agency: \"广东省建设厅\",licensing_imageurl: \"asd\"\r\n                },\r\n                {  name: \"一级建造师\",username:\"叶小蝶\",ID:'',\r\n                    certificate_time: \"2025年7月\",certificate_id: \"粤建安54896578\",\r\n                    valid_period: 5,major: \"机电智能化\",category: \"注册类\",status:\"待定\",\r\n                    licensing_agency: \"广东省建设厅\",licensing_imageurl: \"asd\"\r\n                },\r\n                {  name: \"一级建造师\",username:\"叶小蝶\",ID:'',\r\n                    certificate_time: \"2025年7月\",certificate_id: \"粤建安54896578\",\r\n                    valid_period: 5,major: \"机电智能化\",category: \"注册类\",status:\"待定\",\r\n                    licensing_agency: \"广东省建设厅\",licensing_imageurl: \"asd\"\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    methods:{\r\n        editItem (item) {\r\n        this.editedIndex = this.profiles.indexOf(item)\r\n        this.editedItem = Object.assign({}, item)\r\n        this.dialog = true\r\n        console.log(this.editedItem)\r\n        },\r\n\r\n        deleteItem (item) {\r\n        this.editedIndex = this.profiles.indexOf(item)\r\n        this.editedItem = Object.assign({}, item)\r\n        this.dialogDelete = true\r\n        },\r\n\r\n        deleteItemConfirm () {\r\n        this.profiles.splice(this.editedIndex, 1)\r\n        this.closeDelete()\r\n        },\r\n\r\n        close () {\r\n        this.dialog = false\r\n        this.btnloading = false\r\n        this.$nextTick(() => {\r\n          this.editedItem = Object.assign({}, this.defaultItem)\r\n          this.editedIndex = -1\r\n        })\r\n        },\r\n\r\n        closeDelete () {\r\n        this.dialogDelete = false\r\n        this.btnloading = false\r\n        this.$nextTick(() => {\r\n          this.editedItem = Object.assign({}, this.defaultItem)\r\n          this.editedIndex = -1\r\n        })\r\n        },\r\n\r\n        save () {\r\n            console.log(this.editedItem)\r\n            if (this.editedIndex > -1) {\r\n            Object.assign(this.profiles[this.editedIndex], this.editedItem)\r\n            } else {\r\n            this.profiles.push(this.editedItem)\r\n            }\r\n            this.close()\r\n        },\r\n\r\n        toggleselect(){\r\n            if(this.name_selected == []){\r\n                this.name_selected.push(this.work_name)\r\n            }else{this.name_selected = []}\r\n        },\r\n\r\n        //封装chexkbox的联动效果\r\n        //输入参数为,选中的父级checkbox如何影响子checkbox的状态\r\n        //arrayFather为父级checkbox当前数组,name为父级变化参数,array是子集的相应变化参数\r\n        changeselect(arrayFather,name,array){\r\n            if(arrayFather.indexOf(name)==-1){\r\n                for(let k of array) {\r\n                    this.name_selected=this.name_selected.filter(item=>item!==k);\r\n                }\r\n            }else{for(let k of array) {\r\n                    this.name_selected=this.name_selected.filter(item=>item!==k);\r\n                }\r\n                this.name_selected.splice(0,0,...array)}\r\n        },\r\n\r\n        setTypeName(category){\r\n            if(category == '注册类'){\r\n                this.alltypes.name = this.ArrayOne\r\n            }\r\n            if(category == '八大员'){\r\n                this.alltypes.name = this.ArrayTwo\r\n            }\r\n            if(category == '三类人员'){\r\n                this.alltypes.name = this.ArrayThree\r\n            }\r\n            if(category == '职称证'){\r\n                this.alltypes.name = this.ArrayFour\r\n            }\r\n            if(category == '执业资格'){\r\n                this.alltypes.name = this.ArrayFive\r\n            }\r\n            if(category == '技术工人'){\r\n                this.alltypes.name = this.ArraySix\r\n            }\r\n        },\r\n\r\n        setParticipants(departement){\r\n            this.loadingData.setParticipants = true\r\n            this.$http.get(`http://192.168.50.132:3000/users/getallusers?per_page=10&page=1&keyword=${departement}`)\r\n            .then(res => {let user =  []\r\n                        for (let i=0; i < res.data.userlist.length ; i++){\r\n                        user.push(res.data.userlist[i][\"username\"]);}\r\n                        this.Participants = user\r\n                        this.loadingData.setParticipants = false\r\n                        })\r\n            .catch(err => {console.log(err),\r\n                            this.Participants = []\r\n                            this.loadingData.setParticipants = false\r\n                        })\r\n        }\r\n    },\r\n    watch: {\r\n\r\n        dialog (val) {\r\n            val || this.close()\r\n        },\r\n        dialogDelete (val) {\r\n            val || this.closeDelete()\r\n        },\r\n\r\n        category_selected(newval) {\r\n            this.changeselect(newval,'注册类',this.ArrayOne)\r\n            this.changeselect(newval,'八大员',this.ArrayTwo)\r\n            this.changeselect(newval,'三类人员',this.ArrayThree)\r\n            this.changeselect(newval,'职称证',this.ArrayFour)\r\n            this.changeselect(newval,'执业资格',this.ArrayFive)\r\n            this.changeselect(newval,'技术工人',this.ArraySix)\r\n        },\r\n\r\n        name_selected(newval){\r\n            console.log(newval)\r\n        }\r\n    },\r\n    \r\n    computed: {\r\n      formTitle () {\r\n        return this.editedIndex === -1 ? '新增证照' : '修改证照'\r\n      },\r\n    },\r\n    //获取所有员工\r\n    mounted(){\r\n        this.name_selected.push(...this.work_name)\r\n        for (var i=0; i < this.employees.length ; ++i){\r\n            this.Participants.push(this.employees[i][\"username\"]);\r\n        }\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n    .v-chip{background: green;}\r\n</style>\r\n"]}]}