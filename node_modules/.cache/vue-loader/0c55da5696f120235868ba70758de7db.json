{"remainingRequest":"D:\\项目\\new-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\new-app\\src\\pages\\login\\components\\Forgot.vue?vue&type=style&index=0&id=6c667362&scoped=true&lang=css&","dependencies":[{"path":"D:\\项目\\new-app\\src\\pages\\login\\components\\Forgot.vue","mtime":1606548025743},{"path":"D:\\项目\\new-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\new-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgogIGEgewogICAgY29sb3I6d2hpdGUKfQo="},{"version":3,"sources":["Forgot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA","file":"Forgot.vue","sourceRoot":"src/pages/login/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout justify-center  >\n      <v-flex xs12 md6 >\n        <v-card class=\"pa-4\" elevation=\"20\">\n          <h1 block class=\"text-center\">忘记密码?</h1>\n          <div class=\"mb-6 overline text-center\">输入您的帐户电子邮件地址，我们将向您发送一个链接以重置密码</div>\n          <v-text-field label=\"E-mail\" \n          outlined v-model=\"email\"\n          @input=\"$v.email.$touch()\"\n          @blur=\"$v.email.$touch()\"\n          required  :error-messages=\"emailErrors\"\n          ></v-text-field>\n          <v-btn :loading=\"isLoading\" :disabled=\"disabled\" block depressed\n                  x-large color=\"indigo white--text\" @click.stop=\"resend\"\n          >发送邮件{{ seconds }}</v-btn>\n        </v-card>\n        <p block class=\"text-center ma-5\" >\n          <router-link to=\"/signin\" color=\"white\">返回登陆?</router-link>\n        </p>\n        <v-snackbar v-model=\"snackbar\">\n          {{ text }}\n          <template v-slot:action=\"{ attrs }\">\n            <v-btn :color=\"snackcolor\" text v-bind=\"attrs\" @click=\"snackbar = false\">Close</v-btn>\n          </template>\n        </v-snackbar>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport { validationMixin } from \"vuelidate\";\nimport { required,email} from \"vuelidate/lib/validators\";\nconst TIMEOUT = 10\nexport default {\n  mixins: [validationMixin],\n  validations: {\n    email: { required, email },\n  },\n  data() {\n    return {\n      text:'',\n      snackbar:false,\n      snackcolor:'green',\n      email:'',\n      isLoading: false,\n      disabled: false,\n      times: 0,\n      resendInterval: null,\n      secondsToEnable: TIMEOUT,\n      seconds: ''\n    }\n  },\n  computed:{\n    emailErrors() {\n    const errors = []\n    if (!this.$v.email.$dirty) return errors \n    !this.$v.email.email && errors.push('邮箱必须符合邮箱地址格式')\n    !this.$v.email.required && errors.push('必须输入邮箱不不能为空.')\n    return errors\n    }\n  },\n  beforeDestroy() {\n    clearInterval(this.resendInterval)\n  },\n  methods: {\n    async resend() {\n      this.$v.$touch()\n      if((this.emailErrors).length == 0){this.setTimer()}\n    }, \n    setTimer() {\n      this.snackbar = true\n      this.text = \"邮箱已经发送，请查收\"\n      this.disabled = true\n      this.times++\n      this.secondsToEnable = TIMEOUT * this.times\n\n      this.resendInterval = setInterval(() => {\n        if (this.secondsToEnable === 0) {\n          clearInterval(this.resendInterval)\n          this.seconds = ''\n          this.disabled = false\n          this.snackbar = false\n        } else {\n          this.seconds = `( ${this.secondsToEnable} )`\n          this.secondsToEnable--\n        }\n      }, 1000)\n    }\n  }\n}\n</script>\n\n<style scoped>\n  a {\n    color:white\n}\n</style>\n\n\n"]}]}